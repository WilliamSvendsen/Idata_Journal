package org.example;

import java.util.ArrayList;
import java.util.List;

/**
 * Register for DiaryEntry-objekter.
 */

public class Diary {
    private final List<DiaryEntry> entries; //flertallsnavn

    public Diary() {
        this.entries = new ArrayList<>();
    }

    /**
     * Søker etter DiaryEntry-objekter ved bruk av søkeord.
     */

    public void search(String searchWord) {
        if (searchWord == null || searchWord.isEmpty()) {
            System.out.println("Vennligst søk etter et ord");
            return;
        }
        String lower =  searchWord.toLowerCase();
        boolean found = false;
        for (DiaryEntry entry : entries) {
            if (entry.getTitle().toLowerCase().contains(lower) ||
                entry.getAuthor().toLowerCase().contains(lower)) {
                System.out.println(entry);
                System.out.println("------------");
                found = true;
            }
        }
        if (!found) {
            System.out.println("Fant ingen entries som har søkeordet \"" +searchWord+"\".");
        }
    }

    public boolean deleteEntry(int index) {
        if (index < 0 || index >= entries.size()) { //hvis index er mindre enn 0, eller hvis index er mindre en mengden entries
            return false;
        }
        entries.remove(index);
        return true;
    }

    public DiaryEntry getEntry(int index) {
        if (index < 0 || index >= entries.size()) {
            throw new IndexOutOfBoundsException("Ugyldig indeks: " + index);
        }
        return entries.get(index);
    }

    /**
     * Lager nytt innlegg. Parameter valideres av DiaryEntry.
     */

    public void addEntry(String title, String author, String entry) {
        DiaryEntry newEntry = new DiaryEntry(title, author, entry);
        entries.add(newEntry);
    }

    /**
     * Viser dagbokinnlegg, hvis noen finnes.
     */

    public void showAllEntries() { //viser tidligere innlegg.
        if (entries.isEmpty()) {
            System.out.println("Ingen dagbokinnlegg."); // melding hvis ingen innlegg finnes
            return;
        }
        for (DiaryEntry entry : entries) { // returnerer funnet innlegg.
            System.out.println(entry);
            System.out.println("---------------------------");
        }
    }
    /**
     * Skal returnere antall innlegg.
     */
    public int size() {
        return entries.size();
    }
}
