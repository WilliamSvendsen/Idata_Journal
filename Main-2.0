package org.example;

import java.util.Scanner; //googlet for denne, veldig smart, lar den reagere på brukerinnput når programmet kjører


// Hovedsakelig "visual" interface, kaller også metoder fra Diary for å Legge til/Vise innlegg.
// Brukerinteraksjonen

public class Main {
    public static void main(String[] args) { //Foreslått av Chat-GPT, String[] args er parameter for kommando-linje-inputs, [] er fylt med et tall
        Scanner scanner = new Scanner(System.in); //Scanner som "scanner" et innput fra brukeren
        Diary dagbok = new Diary(); //for ny dagbok innlegg
        boolean programKjører = true; // "Goalpost", når denne er false slutter løkken.

        while (programKjører) { //Så lenge denne er true (er true ovenfor), kjører programmet
            System.out.println("\n--- Min Dagbok ---"); //menynavn og struktur foreslått av GPT
            System.out.println("1. Legg til nytt innlegg");
            System.out.println("2. Vis alle innlegg");
            System.out.println("3. Avslutt");
            System.out.print("Velg et alternativ: ");

            String valgStr = scanner.nextLine().trim();
            if (valgStr.isEmpty()) { //Sjekker om brukeren skriver ingenting
                System.out.println("Skriv et tall fra 1-3!"); //utropsteng er for testing
                continue;
            }

            int valg; //Kjører dette hvis noe er skrevet
            try {
                valg = Integer.parseInt(valgStr); //Konverterer "valg" til int
            } catch (NumberFormatException e) {
                System.out.println("Skriv et tall (1-3)."); //litt som World of zuul, den gjør noe basert på hva jeg legger inn.
                continue;
            }

            switch (valg) { //edit: linje 36 notat er 1.0 notater
                // Opprinnelig if statements, men switcher fungerte bedre
                // 2.0 notater: Nå bruker jeg begge to lmao
                case 1 -> { //Case 1 og 3 er en 2.0.
                    String tittel; //dette skal sørge for at jeg ikke kan ha tittel, forfatter og innhold som ingenting!
                    do {
                        System.out.print("Tittel: ");
                        tittel = scanner.nextLine().trim();
                        if (tittel.isEmpty()) { //hvis tittelen er tom, så ber den meg gjøre den ikke tom!
                            System.out.println("Helst lag en tittel");
                        }
                    } while (tittel.isEmpty());

                    String forfatter;
                    do {
                        System.out.print("Forfatter: ");
                        forfatter = scanner.nextLine().trim();
                        if (forfatter.isEmpty()) {
                            System.out.println("Helst lag en forfatter");
                        }
                    } while (forfatter.isEmpty());

                    String innhold;
                    do {
                        System.out.print("Innhold: ");
                        innhold = scanner.nextLine().trim();
                        if (innhold.isEmpty()) {
                            System.out.println("Helst lag ett innhold.");
                        }
                    } while (innhold.isEmpty());

                    dagbok.leggTilInnlegg(tittel, forfatter, innhold);
                    System.out.println("Innlegg lagt til!");
                }
                case 2 -> dagbok.visAlleInnlegg();
                case 3 -> {
                    System.out.println("Er du sikker på at du vil avslutte? (j/n)"); //Ber at brukeren bekrefter at de skal avslutte
                    String bekreft = scanner.nextLine();

                    if (bekreft.equals("j")) {
                        scanner.close();
                        programKjører = false; //Avslutter Løkken
                    }
                }
                default -> System.out.println("ERROR, helst skriv noe"); //hvis jeg ikke skriver noe
            }
        }
    }
}
