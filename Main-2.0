package org.example;

import java.util.Scanner; //googlet for denne, veldig smart, lar den reagere på brukerinnput når programmet kjører


// Hovedsakelig "visual" interface, kaller også metoder fra Diary for å Legge til/Vise innlegg.
// Brukerinteraksjonen

public class Main {
    public static void main(String[] args) { //Foreslått av Chat-GPT, String[] args er parameter for kommando-linje-inputs, [] er fylt med et tall
        Scanner scanner = new Scanner(System.in); //Scanner som "scanner" et innput fra brukeren
        Diary diary = new Diary(); //for ny dagbok innlegg
        boolean programRunning = true; // "Goalpost", når denne er false slutter løkken.

        while (programRunning) { //Så lenge denne er true (er true ovenfor), kjører programmet
            System.out.println("\n--- Min Dagbok ---"); //menynavn og struktur foreslått av GPT
            System.out.println("1. Legg til nytt innlegg");
            System.out.println("2. Vis alle innlegg");
            System.out.println("3. Avslutt");
            System.out.print("Velg et alternativ: ");

            String choiceStr = scanner.nextLine().trim();
            if (choiceStr.isEmpty()) { //Sjekker om brukeren skriver ingenting
                System.out.println("Skriv et tall fra 1-3!"); //utropsteng er for testing
                continue;
            }

            int choice; //Kjører dette hvis noe er skrevet
            try {
                choice = Integer.parseInt(choiceStr); //Konverterer "choice" til int
            } catch (NumberFormatException e) {
                System.out.println("Skriv et tall (1-3)."); //litt som World of zuul, den gjør noe basert på hva jeg legger inn.
                continue;
            }

            switch (choice) { //edit: linje 36 notat er 1.0 notater
                // Opprinnelig if statements, men switcher fungerte bedre
                // 2.0 notater: Nå bruker jeg begge to lmao
                case 1 -> { //Case 1 og 3 er en 2.0.
                    String title; //dette skal sørge for at jeg ikke kan ha tittel, author og entry som ingenting!
                    do {
                        System.out.print("Tittel: ");
                        title = scanner.nextLine().trim();
                        if (title.isEmpty()) { //hvis tittelen er tom, så ber den meg gjøre den ikke tom!
                            System.out.println("Helst lag en tittel");
                        }
                    } while (title.isEmpty());

                    String author;
                    do {
                        System.out.print("Forfatter: ");
                        author = scanner.nextLine().trim();
                        if (author.isEmpty()) {
                            System.out.println("Helst lag en author");
                        }
                    } while (author.isEmpty());

                    String entry;
                    do {
                        System.out.print("Innhold: ");
                        entry = scanner.nextLine().trim();
                        if (entry.isEmpty()) {
                            System.out.println("Helst lag ett entry.");
                        }
                    } while (entry.isEmpty());

                    diary.addEntry(title, author, entry);
                    System.out.println("Innlegg lagt til!");
                }
                case 2 -> {
                    diary.showAllEntries();
                    System.out.println("Antall innlegg: " + diary.size());
                }
                case 3 -> {
                    System.out.println("Er du sikker på at du vil avslutte? (j/n)"); //Ber at brukeren bekrefter at de skal avslutte
                    String confirm = scanner.nextLine();

                    if (confirm.equals("j")) { //kjører hvis "confirm" er j,
                        scanner.close();
                        programRunning = false; //Avslutter Løkken
                    }
                }
                case 4 -> {
                    System.out.println("Søk etter innlegg: ");
                    String searchWord = scanner.nextLine();
                    diary.search(searchWord);
                }
                default -> System.out.println("ERROR, helst skriv noe"); //hvis jeg ikke skriver noe
            }
        }
    }
}
